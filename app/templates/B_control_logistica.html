<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BQA ONE-CONTROL LOGISTICA | {{ empresa }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-primary: #015249;
            --color-primary-dark: #013d36;
            --color-bg: #f3f4f6;
            --color-surface: #ffffff;
            --color-border: #e5e7eb;
            --color-text: #1f2937;
            --color-muted: #6b7280;
        }

        body { font-family: 'Inter', sans-serif; background: var(--color-bg); margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* SIDEBAR */
        .sidebar { width: 280px; background: var(--color-surface); border-right: 1px solid var(--color-border); padding: 1.5rem; display: flex; flex-direction: column; }
        .brand-container { display: flex; align-items: center; gap: 15px; margin-bottom: 2rem; border-bottom: 1px solid var(--color-border); padding-bottom: 1rem; }
        .logo-app { height: 40px; } 
        .logo-cliente { height: 35px; max-width: 100px; object-fit: contain; }
        
        .menu-label { font-size: 0.75rem; color: var(--color-muted); font-weight: 600; text-transform: uppercase; margin-bottom: 0.75rem; }
        
        .menu-item {
            width: 100%; display: flex; align-items: center; padding: 0.75rem 1rem;
            border: none; background: transparent; color: var(--color-text);
            font-weight: 500; cursor: pointer; border-radius: 8px; text-align: left;
            margin-bottom: 0.5rem; transition: 0.2s; font-size: 0.95rem; text-decoration: none;
        }
        .menu-item:hover, .menu-item.active { background: #f0fdfa; color: var(--color-primary); }
        .menu-item svg { width: 20px; height: 20px; margin-right: 12px; }

        /* BOTONES ESPECIALES */
        .btn-upload { background: #e0f2fe; color: #0284c7; font-weight: 600; }
        .btn-upload:hover { background: #bae6fd; }
        
        .btn-alistamiento { background: #fef3c7; color: #b45309; font-weight: 600; }
        .btn-alistamiento:hover { background: #fde68a; }
        
        .btn-logout { 
            margin-top: auto; 
            background: var(--color-primary) !important; 
            color: white !important; 
            display: flex;
            justify-content: center;
            padding: 0.5rem !important;
            font-size: 0.85rem !important;
            width: 90%; 
            align-self: center; 
            border-radius: 20px;
        }

        /* MAIN */
        .main-content { flex: 1; padding: 2rem; overflow-y: auto; }
        .header h1 { font-size: 1.75rem; color: var(--color-primary); margin: 0; }
        .header p { color: var(--color-muted); margin: 5px 0 0; }

        /* KPIS */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .kpi-card { background: white; padding: 1.5rem; border-radius: 12px; border: 1px solid var(--color-border); box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .kpi-val { font-size: 2rem; font-weight: 700; display: block; margin-top: 5px; }
        .kpi-lbl { font-size: 0.85rem; color: var(--color-muted); font-weight: 600; }

        /* MODALES */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(3px); z-index: 1000;
        }
        
        .modal-large {
            width: 95%; max-width: 1200px; height: 90vh; 
            background: #f9fafb; border-radius: 16px; display: flex; flex-direction: column;
            overflow: hidden; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        .modal-card {
            background: white; border-radius: 16px; width: 90%; max-width: 450px;
            padding: 0; overflow: hidden; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }

        .modal-header { padding: 1.5rem; background: white; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 2rem; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 1.5rem; background: white; border-top: 1px solid var(--color-border); display: flex; justify-content: flex-end; gap: 1rem; }

        .section-box { background: white; border-radius: 12px; border: 1px solid var(--color-border); margin-bottom: 2rem; overflow: hidden; }
        .section-title { padding: 1rem 1.5rem; background: #f8fafc; border-bottom: 1px solid var(--color-border); font-weight: 600; margin: 0; font-size: 1.1rem; }
        
        .data-table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
        .data-table th { text-align: left; padding: 1rem 1.5rem; background: #f8fafc; color: var(--color-muted); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; border-bottom: 1px solid var(--color-border); }
        .data-table td { padding: 1rem 1.5rem; border-bottom: 1px solid var(--color-border); }
        
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .badge-blue { background: #eff6ff; color: #1d4ed8; }
        .badge-green { background: #f0fdf4; color: #15803d; }
        .badge-yellow { background: #fef3c7; color: #b45309; }

        .btn-assign { background: white; border: 1px solid var(--color-border); padding: 5px 10px; border-radius: 6px; cursor: pointer; color: var(--color-primary); font-weight: 600; }
        .btn-assign:hover { background: var(--color-primary); color: white; }

        .btn-cancel { background: white; border: 1px solid var(--color-border); padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; }
        .btn-confirm { background: var(--color-primary); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; }

        .drop-area { border: 2px dashed #cbd5e1; border-radius: 12px; padding: 3rem; text-align: center; cursor: pointer; background: #f8fafc; }
        .drop-area:hover { border-color: var(--color-primary); background: #f0fdfa; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="brand-container">
            <img src="{{ url_for('static', filename='logo_energix360.png') }}" class="logo-app" alt="App">
            <div style="width:1px; height:30px; background:#e5e7eb; margin:0 15px;"></div>
            {% if nit %}
            <img src="{{ url_for('static', filename='logo_' ~ nit ~ '.PNG') }}" class="logo-cliente" onerror="this.style.display='none'">
            {% endif %}
        </div>

        <div class="menu-label">Gesti√≥n Log√≠stica</div>
        
        <button class="menu-item active">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
            Dashboard
        </button>

        <button onclick="openAlistamientoModal()" class="menu-item btn-alistamiento">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"></path><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
            Alistamiento
        </button>

        <button onclick="openUploadModal()" class="menu-item btn-upload">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
            Cargar Picking (Excel)
        </button>

        <a href="/logout" class="menu-item btn-logout">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
            Cerrar Sesi√≥n
        </a>
    </aside>

    <main class="main-content">
        <div class="header">
            <h1>Centro de Control Log√≠stico</h1>
            <p>Bienvenido, {{ nombre }} | {{ empresa }}</p>
        </div>

        <div class="kpi-grid">
            <div class="kpi-card">
                <span class="kpi-lbl">Total Pedidos</span>
                <span class="kpi-val">{{ kpis.pedidos_totales }}</span>
            </div>
            
            <div class="kpi-card" style="border-left: 5px solid #ea580c; display: flex; flex-direction: column; justify-content: center;">
                <span class="kpi-lbl" style="margin-bottom: 10px; border-bottom: 1px solid #f3f4f6; padding-bottom: 5px;">Carga Pendiente</span>
                
                <div style="display: flex; justify-content: space-between; text-align: center;">
                    <div>
                        <span style="font-size: 1.4rem; font-weight: 800; color: #1f2937; display: block;">
                            {{ kpis.pedidos_totales }}
                        </span>
                        <small style="font-size: 0.7rem; color: #6b7280; font-weight: 700;">ORDENES</small>
                    </div>
                    <div style="width: 1px; background: #e5e7eb; margin: 0 10px;"></div>
                    <div>
                        <span style="font-size: 1.4rem; font-weight: 800; color: #ea580c; display: block;">
                            {{ kpis.items_pendientes }}
                        </span>
                        <small style="font-size: 0.7rem; color: #ea580c; font-weight: 700;">ITEMS (Ref)</small>
                    </div>
                </div>
            </div>

            <div class="kpi-card">
                <span class="kpi-lbl">Items Finalizados</span>
                <span class="kpi-val" style="color: #059669;">{{ kpis.items_finalizados }}</span>
            </div>
        </div>
        
        <div style="margin-top: 3rem; text-align: center; color: var(--color-muted);">
            <p>‚ÑπÔ∏è Para gestionar pedidos y ver la actividad en vivo, haga clic en <b>"Alistamiento"</b> en el men√∫ lateral.</p>
        </div>
    </main>

    <div id="modalAlistamiento" class="modal-overlay">
        <div class="modal-large">
            <div class="modal-header">
                <h3>üìã Gesti√≥n de Alistamiento & Monitoreo</h3>
                <button class="btn-cancel" onclick="closeAlistamientoModal()" style="border:none; padding:0; font-size:1.5rem;">&times;</button>
            </div>
            <div class="modal-body" style="background: #f3f4f6;">
                
                <div class="section-box">
                    <h4 class="section-title">üì¶ Pedidos Pendientes por Asignar</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Orden</th>
                                <th>Zona</th>
                                <th>Items</th>
                                <th>Creaci√≥n</th>
                                <th>Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if ordenes_pendientes %}
                                {% for orden in ordenes_pendientes %}
                                <tr>
                                    <td><b>{{ orden.orden }}</b></td>
                                    <td><span class="badge badge-blue">{{ orden.zona }}</span></td>
                                    <td>{{ orden.items }}</td>
                                    <td>{{ orden.fecha }}</td>
                                    <td>
                                        <button onclick="abrirAsignar('{{ orden.orden }}')" class="btn-assign">Asignar üë§</button>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr><td colspan="5" style="text-align:center; padding:1.5rem; color:#6b7280;">‚úÖ No hay pedidos pendientes.</td></tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>

                <div class="section-box">
                    <h4 class="section-title">üì° Operarios en Tiempo Real</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Operario</th>
                                <th>Estado</th>
                                <th>Orden Actual</th>
                                <th>Progreso (Items)</th>
                                <th>Tiempo</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if ordenes_asignadas %}
                                {% for op in ordenes_asignadas %}
                                <tr>
                                    <td>{{ op.operario }}</td>
                                    <td>
                                        {% if op.estado == 'FINALIZADO' %}
                                            <span class="badge badge-green">FINALIZADO</span>
                                        {% else %}
                                            <span class="badge badge-yellow">EN PROCESO</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ op.orden }}</td>
                                    
                                    <td 
                                        onclick="verDetalleOrden('{{ op.orden }}')"
                                        style="cursor: pointer; color: #0284c7; text-decoration: underline; font-weight: bold;"
                                        title="Clic para ver detalle completo">
                                        {{ op.items_listos }} / {{ op.total_items }}
                                    </td>
                                    
                                    <td>
                                        {% if op.estado == 'FINALIZADO' %}
                                            <span style="color:#059669; font-weight:bold;">‚úî Listo</span>
                                        {% elif op.inicio %}
                                            <span class="cronometro" data-inicio="{{ op.inicio }}" style="font-family:monospace; font-weight:bold; color:#d97706;">Calculando...</span>
                                        {% else %}
                                            <span style="color:#9ca3af;">--:--</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr><td colspan="5" style="text-align:center; padding:1.5rem; color:#6b7280;">üò¥ No hay operarios activos.</td></tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <div id="modalDetalleOrden" class="modal-overlay" style="z-index: 1100;">
        <div class="modal-large" style="width: 95%; max-width: 1400px; height: 90vh; background: #f3f4f6;">
            
            <div class="modal-header" style="background: #fff; padding: 15px 25px; border-bottom: 1px solid #e5e7eb;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <h3 style="margin:0; color:#1f2937; font-size:1.4rem;">üîé Orden #<span id="lblOrdenDetalle" style="color:var(--color-primary);"></span></h3>
                </div>
                <button class="btn-cancel" onclick="cerrarModalDetalle()" style="border:none; padding:0; font-size:1.8rem; color:#9ca3af; cursor:pointer;">&times;</button>
            </div>

            <div class="modal-body" style="padding: 20px; display: flex; gap: 20px; height: 100%; overflow: hidden; box-sizing: border-box;">
                
                <div style="flex: 1; display: flex; flex-direction: column; background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border-top: 5px solid #ea580c; overflow: hidden;">
                    <div style="padding: 15px; border-bottom: 1px solid #f3f4f6; background: #fff7ed;">
                        <h4 style="margin:0; color: #c2410c; display:flex; justify-content:space-between; align-items:center;">
                            ‚ö†Ô∏è Faltantes / En Proceso
                            <span id="countPendientes" style="background: #ea580c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">0</span>
                        </h4>
                    </div>
                    <div style="flex: 1; overflow-y: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                            <thead style="position: sticky; top: 0; background: white; z-index: 10;">
                                <tr>
                                    <th style="text-align:left; padding:12px; background:#f9fafb;">PRODUCTO</th>
                                    <th style="text-align:center; width:60px; padding:12px; background:#f9fafb;">CANT</th>
                                </tr>
                            </thead>
                            <tbody id="tblPendientesBody"></tbody>
                        </table>
                    </div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border-top: 5px solid #10b981; overflow: hidden;">
                    <div style="padding: 15px; border-bottom: 1px solid #f3f4f6; background: #ecfdf5;">
                        <h4 style="margin:0; color: #047857; display:flex; justify-content:space-between; align-items:center;">
                            ‚úÖ Listos / Finalizados
                            <span id="countListos" style="background: #10b981; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">0</span>
                        </h4>
                    </div>
                    <div style="flex: 1; overflow-y: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                            <thead style="position: sticky; top: 0; background: white; z-index: 10;">
                                <tr>
                                    <th style="text-align:left; padding:12px; background:#f9fafb;">PRODUCTO</th>
                                    <th style="text-align:center; width:60px; padding:12px; background:#f9fafb;">CANT</th>
                                </tr>
                            </thead>
                            <tbody id="tblListosBody"></tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="modalAsignar" class="modal-overlay" style="z-index: 1050;">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Asignar Orden <span id="targetOrden" style="color:var(--color-primary);"></span></h3>
                <button class="btn-cancel" onclick="cerrarAsignar()" style="border:none; padding:0; font-size:1.5rem;">&times;</button>
            </div>
            <div class="modal-body">
                <p>Seleccione operario disponible:</p>
                <select id="selOperario" style="width:100%; padding:10px; border-radius:8px; border:1px solid #ccc;">
                    <option value="">Cargando...</option>
                </select>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="cerrarAsignar()">Cancelar</button>
                <button class="btn-confirm" onclick="confirmarAsignar()">Confirmar</button>
            </div>
        </div>
    </div>

    <div id="modalUpload" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Cargar Picking</h3>
                <button class="btn-cancel" onclick="closeUpload()" style="border:none; padding:0; font-size:1.5rem;">&times;</button>
            </div>
            <div class="modal-body">
                <form id="frmUpload">
                    <input type="file" name="file" id="fi" accept=".xlsx" style="display:none" onchange="document.getElementById('fn').textContent=this.files[0].name">
                    <div class="drop-area" onclick="document.getElementById('fi').click()">
                        <p id="fn" style="margin:0">Clic para seleccionar Excel</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeUpload()">Cancelar</button>
                <button class="btn-confirm" onclick="doUpload()">Subir</button>
            </div>
        </div>
    </div>

    <script>
        // VARIABLE GLOBAL PARA EL POLLING
        let intervaloDetalle = null;

        // -- FUNCION JS: CARGAR DETALLE MEJORADO --
        function verDetalleOrden(orden) {
            document.getElementById('lblOrdenDetalle').textContent = orden;
            document.getElementById('modalDetalleOrden').style.display = 'flex';
            
            // 1. Cargar inmediatamente al abrir
            cargarDatosDetalle(orden);
            
            // 2. Configurar auto-recarga (5 minutos = 300000 ms)
            if(intervaloDetalle) clearInterval(intervaloDetalle);
            intervaloDetalle = setInterval(() => cargarDatosDetalle(orden), 300000);
        }

        // Funci√≥n para detener el consumo cuando se cierra el modal
        function cerrarModalDetalle() {
            if(intervaloDetalle) clearInterval(intervaloDetalle);
            document.getElementById('modalDetalleOrden').style.display = 'none';
        }

        // Funci√≥n separada para la carga de datos
        function cargarDatosDetalle(orden) {
            const tbPend = document.getElementById('tblPendientesBody');
            const tbList = document.getElementById('tblListosBody');
            
            fetch(`/bodegas/api/items_orden/${orden}`)
                .then(r => r.json())
                .then(items => {
                    // Limpiamos contenido
                    tbPend.innerHTML = '';
                    tbList.innerHTML = '';

                    const pendientes = items.filter(i => i.estado_actividad !== 'FINALIZADO');
                    const alistados = items.filter(i => i.estado_actividad === 'FINALIZADO');

                    document.getElementById('countPendientes').textContent = pendientes.length;
                    document.getElementById('countListos').textContent = alistados.length;

                    const crearFila = (item, color, esPar) => `
                        <tr style="background-color: ${esPar ? '#f9fafb' : '#ffffff'}; border-bottom: 1px solid #f3f4f6; animation: fadeIn 0.3s;">
                            <td style="padding: 10px 12px; color: #374151;">
                                <div style="font-weight:600;">${item.descripcion_producto}</div>
                                <div style="font-size:0.75rem; color:#6b7280;">${item.codigo_producto}</div>
                            </td>
                            <td style="padding: 10px; text-align: center; font-weight: 700; color: ${color};">
                                ${item.cantidad}
                            </td>
                        </tr>
                    `;

                    if (pendientes.length === 0) tbPend.innerHTML = '<tr><td colspan="2" style="padding:20px; text-align:center;">üéâ Nada pendiente</td></tr>';
                    else pendientes.forEach((i, x) => tbPend.innerHTML += crearFila(i, '#ea580c', x % 2 === 0));

                    if (alistados.length === 0) tbList.innerHTML = '<tr><td colspan="2" style="padding:20px; text-align:center;">‚è≥ Nada listo</td></tr>';
                    else alistados.forEach((i, x) => tbList.innerHTML += crearFila(i, '#10b981', x % 2 === 0));
                })
                .catch(err => console.error("Error polling:", err));
        }

        // -- ALISTAMIENTO --
        function openAlistamientoModal() { document.getElementById('modalAlistamiento').style.display = 'flex'; }
        function closeAlistamientoModal() { document.getElementById('modalAlistamiento').style.display = 'none'; }

        // -- UPLOAD --
        function openUploadModal() { document.getElementById('modalUpload').style.display = 'flex'; }
        function closeUpload() { document.getElementById('modalUpload').style.display = 'none'; }
        function doUpload() {
            const fd = new FormData(document.getElementById('frmUpload'));
            fetch('/bodegas/upload_excel', {method:'POST', body:fd})
            .then(r=>r.json()).then(d=>{ alert(d.message||d.error); if(!d.error) location.reload(); });
        }

        // -- ASIGNAR --
        let curOrden = null;
        function abrirAsignar(orden) {
            curOrden = orden;
            document.getElementById('targetOrden').textContent = orden;
            document.getElementById('modalAsignar').style.display = 'flex';
            fetch('/bodegas/api/get_empleados').then(r=>r.json()).then(u=>{
                const s = document.getElementById('selOperario');
                s.innerHTML='<option value="">Seleccione...</option>';
                u.forEach(e=>s.innerHTML+=`<option value="${e.id}" data-n="${e.nombre}">${e.nombre}</option>`);
            });
        }
        function cerrarAsignar() { document.getElementById('modalAsignar').style.display = 'none'; }
        function confirmarAsignar() {
            const s = document.getElementById('selOperario');
            if(!s.value) return alert('Seleccione operario');
            fetch('/bodegas/asignar_orden', {
                method:'POST', headers:{'Content-Type':'application/json'},
                body: JSON.stringify({numero_orden:curOrden, id_operario:s.value, nombre_operario:s.options[s.selectedIndex].getAttribute('data-n')})
            }).then(r=>r.json()).then(d=>{ alert(d.message||d.error); location.reload(); });
        }

        // -- CRONOMETRO EN VIVO --
        function actualizarCronometros() {
            const cronometros = document.querySelectorAll('.cronometro');
            const ahora = new Date();

            cronometros.forEach(el => {
                const inicioStr = el.getAttribute('data-inicio');
                if(!inicioStr) return;
                
                const fechaInicio = new Date(inicioStr.replace(' ', 'T'));
                if(isNaN(fechaInicio.getTime())) return;

                const diff = ahora - fechaInicio;
                if (diff > 0) {
                    const horas = Math.floor(diff / (1000 * 60 * 60));
                    const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const segundos = Math.floor((diff % (1000 * 60)) / 1000);

                    el.textContent = 
                        (horas < 10 ? "0" + horas : horas) + ":" + 
                        (minutos < 10 ? "0" + minutos : minutos) + ":" + 
                        (segundos < 10 ? "0" + segundos : segundos);
                }
            });
        }
        
        setInterval(actualizarCronometros, 1000);
        actualizarCronometros();
    </script>
</body>
</html>